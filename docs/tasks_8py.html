<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ME 405 Pen Plotter: tasks.py File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ME 405 Pen Plotter
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('tasks_8py.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">tasks.py File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>This file contains the main function for controlling the plotter, along with task functions for sending position commands to the stepper drivers and to a PC via UART.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:abe0ffeb0c6c241b5ca5bad9b355032c3"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tasks_8py.html#abe0ffeb0c6c241b5ca5bad9b355032c3">tasks.onButtonPressFCN</a> (IRQ_src)</td></tr>
<tr class="memdesc:abe0ffeb0c6c241b5ca5bad9b355032c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the button flag when the button is pressed.  <a href="tasks_8py.html#abe0ffeb0c6c241b5ca5bad9b355032c3">More...</a><br /></td></tr>
<tr class="separator:abe0ffeb0c6c241b5ca5bad9b355032c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90bca6f1ca625dfe24640522fa733663"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tasks_8py.html#a90bca6f1ca625dfe24640522fa733663">tasks.get_velocity_setting</a> (rad_per_sec)</td></tr>
<tr class="memdesc:a90bca6f1ca625dfe24640522fa733663"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts the velocity value that is passed in.  <a href="tasks_8py.html#a90bca6f1ca625dfe24640522fa733663">More...</a><br /></td></tr>
<tr class="separator:a90bca6f1ca625dfe24640522fa733663"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18f2be2f9925530bb6654f0cc2426484"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tasks_8py.html#a18f2be2f9925530bb6654f0cc2426484">tasks.get_acceleration_setting</a> (rad_per_sec2)</td></tr>
<tr class="memdesc:a18f2be2f9925530bb6654f0cc2426484"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts the acceleration value that is passed in.  <a href="tasks_8py.html#a18f2be2f9925530bb6654f0cc2426484">More...</a><br /></td></tr>
<tr class="separator:a18f2be2f9925530bb6654f0cc2426484"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba9b25173a071096b339ec3855ab041c"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tasks_8py.html#aba9b25173a071096b339ec3855ab041c">tasks.get_pmul_and_pdiv_setting</a> (a_max)</td></tr>
<tr class="memdesc:aba9b25173a071096b339ec3855ab041c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finds values for PMUL and PDIV.  <a href="tasks_8py.html#aba9b25173a071096b339ec3855ab041c">More...</a><br /></td></tr>
<tr class="separator:aba9b25173a071096b339ec3855ab041c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af969518a730c01845310715b784edc6f"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tasks_8py.html#af969518a730c01845310715b784edc6f">tasks.convert_motor1_target</a> (microsteps)</td></tr>
<tr class="memdesc:af969518a730c01845310715b784edc6f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts a motor1 target value to send to the TMC4210.  <a href="tasks_8py.html#af969518a730c01845310715b784edc6f">More...</a><br /></td></tr>
<tr class="separator:af969518a730c01845310715b784edc6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5fa12df20bca46ed52ea867592873407"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tasks_8py.html#a5fa12df20bca46ed52ea867592873407">tasks.convert_motor2_target</a> (microsteps)</td></tr>
<tr class="memdesc:a5fa12df20bca46ed52ea867592873407"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts a motor2 target value to send to the TMC4210.  <a href="tasks_8py.html#a5fa12df20bca46ed52ea867592873407">More...</a><br /></td></tr>
<tr class="separator:a5fa12df20bca46ed52ea867592873407"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac09780cfd49f4a2192afd8feb427139b"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tasks_8py.html#ac09780cfd49f4a2192afd8feb427139b">tasks.g</a> (x, theta)</td></tr>
<tr class="memdesc:ac09780cfd49f4a2192afd8feb427139b"><td class="mdescLeft">&#160;</td><td class="mdescRight">g(x, theta) function for use in the Newton-Raphson algorithm.  <a href="tasks_8py.html#ac09780cfd49f4a2192afd8feb427139b">More...</a><br /></td></tr>
<tr class="separator:ac09780cfd49f4a2192afd8feb427139b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afade8f38c7c94f377a51ea2ce9a99205"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tasks_8py.html#afade8f38c7c94f377a51ea2ce9a99205">tasks.dg_dtheta</a> (theta)</td></tr>
<tr class="memdesc:afade8f38c7c94f377a51ea2ce9a99205"><td class="mdescLeft">&#160;</td><td class="mdescRight">dg/dtheta(theta) function for use in the Newton-Raphson algorithm.  <a href="tasks_8py.html#afade8f38c7c94f377a51ea2ce9a99205">More...</a><br /></td></tr>
<tr class="separator:afade8f38c7c94f377a51ea2ce9a99205"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a274bf78874561823e1109a38a0481cc1"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tasks_8py.html#a274bf78874561823e1109a38a0481cc1">tasks.NewtonRaphson</a> (fcn, jacobian, guess, thresh)</td></tr>
<tr class="memdesc:a274bf78874561823e1109a38a0481cc1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Iteratively solves the roots of y = g(theta).  <a href="tasks_8py.html#a274bf78874561823e1109a38a0481cc1">More...</a><br /></td></tr>
<tr class="separator:a274bf78874561823e1109a38a0481cc1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09cc2dc2ac0499a7e7336bd936c14b53"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tasks_8py.html#a09cc2dc2ac0499a7e7336bd936c14b53">tasks.create_cmd_list</a> ()</td></tr>
<tr class="memdesc:a09cc2dc2ac0499a7e7336bd936c14b53"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a list of motor commands from an hpgl file.  <a href="tasks_8py.html#a09cc2dc2ac0499a7e7336bd936c14b53">More...</a><br /></td></tr>
<tr class="separator:a09cc2dc2ac0499a7e7336bd936c14b53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa8ddc2c7cc0618004b06cec722eaf04"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tasks_8py.html#aaa8ddc2c7cc0618004b06cec722eaf04">tasks.print_cmd_list</a> (cmd_list)</td></tr>
<tr class="memdesc:aaa8ddc2c7cc0618004b06cec722eaf04"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prints out the passed in cmd_list.  <a href="tasks_8py.html#aaa8ddc2c7cc0618004b06cec722eaf04">More...</a><br /></td></tr>
<tr class="separator:aaa8ddc2c7cc0618004b06cec722eaf04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae51a8bc5ea480a9b2d0322148b58740b"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tasks_8py.html#ae51a8bc5ea480a9b2d0322148b58740b">tasks.task_cmds_fun</a> ()</td></tr>
<tr class="memdesc:ae51a8bc5ea480a9b2d0322148b58740b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Task function for sending commands to the TMC4210s.  <a href="tasks_8py.html#ae51a8bc5ea480a9b2d0322148b58740b">More...</a><br /></td></tr>
<tr class="separator:ae51a8bc5ea480a9b2d0322148b58740b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0abe464fecdc1f2a83e44b2bcf009e55"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tasks_8py.html#a0abe464fecdc1f2a83e44b2bcf009e55">tasks.task_comms_fun</a> ()</td></tr>
<tr class="memdesc:a0abe464fecdc1f2a83e44b2bcf009e55"><td class="mdescLeft">&#160;</td><td class="mdescRight">Task function for sending current commands to the PC.  <a href="tasks_8py.html#a0abe464fecdc1f2a83e44b2bcf009e55">More...</a><br /></td></tr>
<tr class="separator:a0abe464fecdc1f2a83e44b2bcf009e55"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a8c4d8aab7352a90d9ace675270383fee"><td class="memItemLeft" align="right" valign="top"><a id="a8c4d8aab7352a90d9ace675270383fee" name="a8c4d8aab7352a90d9ace675270383fee"></a>
string&#160;</td><td class="memItemRight" valign="bottom"><b>tasks.FILENAME</b> = 'drawing.hpgl'</td></tr>
<tr class="separator:a8c4d8aab7352a90d9ace675270383fee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0580566f478a5ce7dfc66cc7cddf5c4"><td class="memItemLeft" align="right" valign="top"><a id="af0580566f478a5ce7dfc66cc7cddf5c4" name="af0580566f478a5ce7dfc66cc7cddf5c4"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>tasks.DPI</b> = 1016</td></tr>
<tr class="separator:af0580566f478a5ce7dfc66cc7cddf5c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a968959c843d96581243f5cf9a7249756"><td class="memItemLeft" align="right" valign="top"><a id="a968959c843d96581243f5cf9a7249756" name="a968959c843d96581243f5cf9a7249756"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>tasks.MM_PER_IN</b> = 25.4</td></tr>
<tr class="separator:a968959c843d96581243f5cf9a7249756"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e8d0063d2767825d743b73b420d490f"><td class="memItemLeft" align="right" valign="top"><a id="a2e8d0063d2767825d743b73b420d490f" name="a2e8d0063d2767825d743b73b420d490f"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>tasks.MAX_MM_DIST</b> = 0.5</td></tr>
<tr class="separator:a2e8d0063d2767825d743b73b420d490f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb7c1e696f67fcd8d8745ada34566476"><td class="memItemLeft" align="right" valign="top"><a id="aeb7c1e696f67fcd8d8745ada34566476" name="aeb7c1e696f67fcd8d8745ada34566476"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>tasks.W</b> = 270</td></tr>
<tr class="separator:aeb7c1e696f67fcd8d8745ada34566476"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a580b04fc79b4a5adb3bc7c6fc6ab83"><td class="memItemLeft" align="right" valign="top"><a id="a7a580b04fc79b4a5adb3bc7c6fc6ab83" name="a7a580b04fc79b4a5adb3bc7c6fc6ab83"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>tasks.H</b> = 90</td></tr>
<tr class="separator:a7a580b04fc79b4a5adb3bc7c6fc6ab83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2606cb52343935ed14edd9d2f21eca7a"><td class="memItemLeft" align="right" valign="top"><a id="a2606cb52343935ed14edd9d2f21eca7a" name="a2606cb52343935ed14edd9d2f21eca7a"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>tasks.D</b> = 42</td></tr>
<tr class="separator:a2606cb52343935ed14edd9d2f21eca7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96e911b8bedae50c12e591b6f0bc756b"><td class="memItemLeft" align="right" valign="top"><a id="a96e911b8bedae50c12e591b6f0bc756b" name="a96e911b8bedae50c12e591b6f0bc756b"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>tasks.RD</b> = 40</td></tr>
<tr class="separator:a96e911b8bedae50c12e591b6f0bc756b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89a7b0301ecce0de040f62fb2c96adac"><td class="memItemLeft" align="right" valign="top"><a id="a89a7b0301ecce0de040f62fb2c96adac" name="a89a7b0301ecce0de040f62fb2c96adac"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>tasks.STEPS_PER_ROTATION</b> = 200</td></tr>
<tr class="separator:a89a7b0301ecce0de040f62fb2c96adac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a229db9c933dd64c4b91f04967e44921c"><td class="memItemLeft" align="right" valign="top"><a id="a229db9c933dd64c4b91f04967e44921c" name="a229db9c933dd64c4b91f04967e44921c"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>tasks.MICROSTEPS</b> = 8</td></tr>
<tr class="separator:a229db9c933dd64c4b91f04967e44921c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afce9162c56d20f0e663bd71f9076e3b2"><td class="memItemLeft" align="right" valign="top"><a id="afce9162c56d20f0e663bd71f9076e3b2" name="afce9162c56d20f0e663bd71f9076e3b2"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>tasks.F_CLK</b> = 20000000</td></tr>
<tr class="separator:afce9162c56d20f0e663bd71f9076e3b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa62462e73a8de6a7d35aee4513dc5b5f"><td class="memItemLeft" align="right" valign="top"><a id="aa62462e73a8de6a7d35aee4513dc5b5f" name="aa62462e73a8de6a7d35aee4513dc5b5f"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>tasks.PULSE_DIV</b> = 5</td></tr>
<tr class="separator:aa62462e73a8de6a7d35aee4513dc5b5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04942af61115ac24e6ffa5b3bd54764c"><td class="memItemLeft" align="right" valign="top"><a id="a04942af61115ac24e6ffa5b3bd54764c" name="a04942af61115ac24e6ffa5b3bd54764c"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>tasks.RAMP_DIV</b> = 5</td></tr>
<tr class="separator:a04942af61115ac24e6ffa5b3bd54764c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc9a0a5044dcc002bf4bd9cb93b21341"><td class="memItemLeft" align="right" valign="top"><a id="acc9a0a5044dcc002bf4bd9cb93b21341" name="acc9a0a5044dcc002bf4bd9cb93b21341"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>tasks.MS_PER_RADIAN</b> = 1 / (2 * math.pi) * STEPS_PER_ROTATION * MICROSTEPS</td></tr>
<tr class="separator:acc9a0a5044dcc002bf4bd9cb93b21341"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04212cb6add3ca60d6a513a5a8fe1de9"><td class="memItemLeft" align="right" valign="top"><a id="a04212cb6add3ca60d6a513a5a8fe1de9" name="a04212cb6add3ca60d6a513a5a8fe1de9"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>tasks.MOTOR1_HOMING_ANGLE</b> = -int(68.27 / 360 * STEPS_PER_ROTATION * MICROSTEPS * 6)</td></tr>
<tr class="separator:a04212cb6add3ca60d6a513a5a8fe1de9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a049983769bf57636dd3f25dc79cb368b"><td class="memItemLeft" align="right" valign="top"><a id="a049983769bf57636dd3f25dc79cb368b" name="a049983769bf57636dd3f25dc79cb368b"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>tasks.MOTOR1_POLARITY</b> = 1</td></tr>
<tr class="separator:a049983769bf57636dd3f25dc79cb368b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af75691d3aac175af865e17090eef9684"><td class="memItemLeft" align="right" valign="top"><a id="af75691d3aac175af865e17090eef9684" name="af75691d3aac175af865e17090eef9684"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>tasks.MOTOR2_HOMING_ANGLE</b> = -int((34.7/2 + 60.24 + 0.9) / 40 * STEPS_PER_ROTATION * MICROSTEPS)</td></tr>
<tr class="separator:af75691d3aac175af865e17090eef9684"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d3a852bb0806051475634e99f747ae6"><td class="memItemLeft" align="right" valign="top"><a id="a4d3a852bb0806051475634e99f747ae6" name="a4d3a852bb0806051475634e99f747ae6"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>tasks.MOTOR2_POLARITY</b> = -1</td></tr>
<tr class="separator:a4d3a852bb0806051475634e99f747ae6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77a716a01a89893175ca215ffbc8aaac"><td class="memItemLeft" align="right" valign="top"><a id="a77a716a01a89893175ca215ffbc8aaac" name="a77a716a01a89893175ca215ffbc8aaac"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>tasks.PEN_DOWN_DEG</b> = 65.5</td></tr>
<tr class="separator:a77a716a01a89893175ca215ffbc8aaac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a180ae32e65446cd4f448be359ce93962"><td class="memItemLeft" align="right" valign="top"><a id="a180ae32e65446cd4f448be359ce93962" name="a180ae32e65446cd4f448be359ce93962"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>tasks.PEN_DOWN_MS</b> = int(PEN_DOWN_DEG / 360 * STEPS_PER_ROTATION * MICROSTEPS)</td></tr>
<tr class="separator:a180ae32e65446cd4f448be359ce93962"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad33e46215aba952636a4e3b08b1d3a4e"><td class="memItemLeft" align="right" valign="top"><a id="ad33e46215aba952636a4e3b08b1d3a4e" name="ad33e46215aba952636a4e3b08b1d3a4e"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>tasks.PEN_UP_DEG</b> = 40</td></tr>
<tr class="separator:ad33e46215aba952636a4e3b08b1d3a4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a321880bc3cc62502714318d2f5d2600f"><td class="memItemLeft" align="right" valign="top"><a id="a321880bc3cc62502714318d2f5d2600f" name="a321880bc3cc62502714318d2f5d2600f"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>tasks.PEN_UP_MS</b> = int(PEN_UP_DEG / 360 * STEPS_PER_ROTATION * MICROSTEPS)</td></tr>
<tr class="separator:a321880bc3cc62502714318d2f5d2600f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad47f38091b6468a2177c42d079ae77fd"><td class="memItemLeft" align="right" valign="top"><a id="ad47f38091b6468a2177c42d079ae77fd" name="ad47f38091b6468a2177c42d079ae77fd"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>tasks.MOTOR1_SPEED</b> = 15</td></tr>
<tr class="separator:ad47f38091b6468a2177c42d079ae77fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7597ff4c3a6010c443173fb2fa8d548"><td class="memItemLeft" align="right" valign="top"><a id="ac7597ff4c3a6010c443173fb2fa8d548" name="ac7597ff4c3a6010c443173fb2fa8d548"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>tasks.MOTOR1_HOMING_SPEED</b> = 3</td></tr>
<tr class="separator:ac7597ff4c3a6010c443173fb2fa8d548"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c004e923391bf2a04f6d0f85d8ea094"><td class="memItemLeft" align="right" valign="top"><a id="a9c004e923391bf2a04f6d0f85d8ea094" name="a9c004e923391bf2a04f6d0f85d8ea094"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>tasks.MOTOR2_SPEED</b> = 15</td></tr>
<tr class="separator:a9c004e923391bf2a04f6d0f85d8ea094"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ff011975b68dc31ca40f82c223a83eb"><td class="memItemLeft" align="right" valign="top"><a id="a2ff011975b68dc31ca40f82c223a83eb" name="a2ff011975b68dc31ca40f82c223a83eb"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>tasks.MOTOR2_HOMING_SPEED</b> = 6</td></tr>
<tr class="separator:a2ff011975b68dc31ca40f82c223a83eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab6fd6dafa41786a453b6791eafbb01f"><td class="memItemLeft" align="right" valign="top"><a id="aab6fd6dafa41786a453b6791eafbb01f" name="aab6fd6dafa41786a453b6791eafbb01f"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>tasks.MOTOR3_SPEED</b> = 15</td></tr>
<tr class="separator:aab6fd6dafa41786a453b6791eafbb01f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a182e4a0048fc52024cf447d7f8b66352"><td class="memItemLeft" align="right" valign="top"><a id="a182e4a0048fc52024cf447d7f8b66352" name="a182e4a0048fc52024cf447d7f8b66352"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>tasks.MOTOR3_HOMING_SPEED</b> = 6</td></tr>
<tr class="separator:a182e4a0048fc52024cf447d7f8b66352"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00da78d786b69b2dd18acd74a4a7455e"><td class="memItemLeft" align="right" valign="top"><a id="a00da78d786b69b2dd18acd74a4a7455e" name="a00da78d786b69b2dd18acd74a4a7455e"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>tasks.MOTOR1_X_MAX</b> = 20000</td></tr>
<tr class="separator:a00da78d786b69b2dd18acd74a4a7455e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb012cb0698a4ac0bf4fe5b511876246"><td class="memItemLeft" align="right" valign="top"><a id="afb012cb0698a4ac0bf4fe5b511876246" name="afb012cb0698a4ac0bf4fe5b511876246"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>tasks.MOTOR2_X_MAX</b> = 20000</td></tr>
<tr class="separator:afb012cb0698a4ac0bf4fe5b511876246"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7442cce3f32900a7c7a1029a85c6891"><td class="memItemLeft" align="right" valign="top"><a id="ab7442cce3f32900a7c7a1029a85c6891" name="ab7442cce3f32900a7c7a1029a85c6891"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>tasks.MOTOR3_X_MAX</b> = 20000</td></tr>
<tr class="separator:ab7442cce3f32900a7c7a1029a85c6891"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2945e2f36f5a710cfc6f0cc7a0e7f77f"><td class="memItemLeft" align="right" valign="top"><a id="a2945e2f36f5a710cfc6f0cc7a0e7f77f" name="a2945e2f36f5a710cfc6f0cc7a0e7f77f"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>tasks.MOTOR1_V_MIN</b> = 10</td></tr>
<tr class="separator:a2945e2f36f5a710cfc6f0cc7a0e7f77f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd448fc9f8eaf4474f4ea2980279416e"><td class="memItemLeft" align="right" valign="top"><a id="abd448fc9f8eaf4474f4ea2980279416e" name="abd448fc9f8eaf4474f4ea2980279416e"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>tasks.MOTOR2_V_MIN</b> = 10</td></tr>
<tr class="separator:abd448fc9f8eaf4474f4ea2980279416e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87a8d8f6a161e6be493ba20e48411e56"><td class="memItemLeft" align="right" valign="top"><a id="a87a8d8f6a161e6be493ba20e48411e56" name="a87a8d8f6a161e6be493ba20e48411e56"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>tasks.MOTOR3_V_MIN</b> = 1</td></tr>
<tr class="separator:a87a8d8f6a161e6be493ba20e48411e56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac98c4f18c27bf174e0ac0cc2051e38c4"><td class="memItemLeft" align="right" valign="top"><a id="ac98c4f18c27bf174e0ac0cc2051e38c4" name="ac98c4f18c27bf174e0ac0cc2051e38c4"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>tasks.MOTOR1_A_MAX</b> = 80</td></tr>
<tr class="separator:ac98c4f18c27bf174e0ac0cc2051e38c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb9aa279ddc5cf1c3923d128ca1c1dd8"><td class="memItemLeft" align="right" valign="top"><a id="acb9aa279ddc5cf1c3923d128ca1c1dd8" name="acb9aa279ddc5cf1c3923d128ca1c1dd8"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>tasks.MOTOR2_A_MAX</b> = 80</td></tr>
<tr class="separator:acb9aa279ddc5cf1c3923d128ca1c1dd8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7b844d75ce6c85fbaa65bd79b69fc6a"><td class="memItemLeft" align="right" valign="top"><a id="af7b844d75ce6c85fbaa65bd79b69fc6a" name="af7b844d75ce6c85fbaa65bd79b69fc6a"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>tasks.MOTOR3_A_MAX</b> = 60</td></tr>
<tr class="separator:af7b844d75ce6c85fbaa65bd79b69fc6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d2dcd0e81c0f640d50b16551c3f4f97"><td class="memItemLeft" align="right" valign="top"><a id="a6d2dcd0e81c0f640d50b16551c3f4f97" name="a6d2dcd0e81c0f640d50b16551c3f4f97"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>tasks.TYPE_PEN_UP</b> = 1</td></tr>
<tr class="separator:a6d2dcd0e81c0f640d50b16551c3f4f97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d948ab1184ba1e073f64db77b53d71e"><td class="memItemLeft" align="right" valign="top"><a id="a1d948ab1184ba1e073f64db77b53d71e" name="a1d948ab1184ba1e073f64db77b53d71e"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>tasks.TYPE_PEN_DOWN</b> = 2</td></tr>
<tr class="separator:a1d948ab1184ba1e073f64db77b53d71e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c40cc2394543a15c42c704e04c27921"><td class="memItemLeft" align="right" valign="top"><a id="a0c40cc2394543a15c42c704e04c27921" name="a0c40cc2394543a15c42c704e04c27921"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>tasks.TYPE_CMDS_DONE</b> = 3</td></tr>
<tr class="separator:a0c40cc2394543a15c42c704e04c27921"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2eba1fc79dc4ae568e676eea07838974"><td class="memItemLeft" align="right" valign="top"><a id="a2eba1fc79dc4ae568e676eea07838974" name="a2eba1fc79dc4ae568e676eea07838974"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>tasks.TYPE_COMMS_DONE</b> = 4</td></tr>
<tr class="separator:a2eba1fc79dc4ae568e676eea07838974"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57de87382ce60daebf2197149fe20394"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tasks_8py.html#a57de87382ce60daebf2197149fe20394">tasks.share_button_flag</a> = None</td></tr>
<tr class="memdesc:a57de87382ce60daebf2197149fe20394"><td class="mdescLeft">&#160;</td><td class="mdescRight">Button flag.  <a href="tasks_8py.html#a57de87382ce60daebf2197149fe20394">More...</a><br /></td></tr>
<tr class="separator:a57de87382ce60daebf2197149fe20394"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb75e7e52287d7047855980c84d9f9ef"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tasks_8py.html#afb75e7e52287d7047855980c84d9f9ef">tasks.cmd_list</a> = None</td></tr>
<tr class="memdesc:afb75e7e52287d7047855980c84d9f9ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">List of stepper commands, in units of microsteps.  <a href="tasks_8py.html#afb75e7e52287d7047855980c84d9f9ef">More...</a><br /></td></tr>
<tr class="separator:afb75e7e52287d7047855980c84d9f9ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7778945946b12bb48b87427f9ceef841"><td class="memItemLeft" align="right" valign="top">list&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tasks_8py.html#a7778945946b12bb48b87427f9ceef841">tasks.drivers</a> = [3]</td></tr>
<tr class="memdesc:a7778945946b12bb48b87427f9ceef841"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stepper_Driver objects for controlling the 3 steppers.  <a href="tasks_8py.html#a7778945946b12bb48b87427f9ceef841">More...</a><br /></td></tr>
<tr class="separator:a7778945946b12bb48b87427f9ceef841"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af008734c9b9e1c494cbcdc6ae12996f4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tasks_8py.html#af008734c9b9e1c494cbcdc6ae12996f4">tasks.button_int</a></td></tr>
<tr class="memdesc:af008734c9b9e1c494cbcdc6ae12996f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Button interrupt.  <a href="tasks_8py.html#af008734c9b9e1c494cbcdc6ae12996f4">More...</a><br /></td></tr>
<tr class="separator:af008734c9b9e1c494cbcdc6ae12996f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a775b5d212ea2468d22ef99a2fb7befdb"><td class="memItemLeft" align="right" valign="top"><a id="a775b5d212ea2468d22ef99a2fb7befdb" name="a775b5d212ea2468d22ef99a2fb7befdb"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>tasks.clk_pin</b> = pyb.Pin(pyb.Pin.board.PB6, pyb.Pin.OUT_PP)</td></tr>
<tr class="memdesc:a775b5d212ea2468d22ef99a2fb7befdb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clock pin. <br /></td></tr>
<tr class="separator:a775b5d212ea2468d22ef99a2fb7befdb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37c5bd214f3b1f8991d788cb3f13cdb3"><td class="memItemLeft" align="right" valign="top"><a id="a37c5bd214f3b1f8991d788cb3f13cdb3" name="a37c5bd214f3b1f8991d788cb3f13cdb3"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>tasks.tim</b> = pyb.Timer(4, period=3, prescaler=0)</td></tr>
<tr class="memdesc:a37c5bd214f3b1f8991d788cb3f13cdb3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Timer for TMC4210 clock signal. <br /></td></tr>
<tr class="separator:a37c5bd214f3b1f8991d788cb3f13cdb3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1a0dda0015f0f558897878d6c50ea2c"><td class="memItemLeft" align="right" valign="top"><a id="ad1a0dda0015f0f558897878d6c50ea2c" name="ad1a0dda0015f0f558897878d6c50ea2c"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>tasks.clk</b> = tim.channel(1, pin=clk_pin, mode=pyb.Timer.PWM, pulse_width=2)</td></tr>
<tr class="memdesc:ad1a0dda0015f0f558897878d6c50ea2c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Timer channel for TMC4210 clock signal. <br /></td></tr>
<tr class="separator:ad1a0dda0015f0f558897878d6c50ea2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a043e4131bd59c7f80781c874187dbeaf"><td class="memItemLeft" align="right" valign="top"><a id="a043e4131bd59c7f80781c874187dbeaf" name="a043e4131bd59c7f80781c874187dbeaf"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>tasks.spi</b> = pyb.SPI(2, pyb.SPI.CONTROLLER, baudrate=1000000, polarity=1, phase=1)</td></tr>
<tr class="memdesc:a043e4131bd59c7f80781c874187dbeaf"><td class="mdescLeft">&#160;</td><td class="mdescRight">SPI. <br /></td></tr>
<tr class="separator:a043e4131bd59c7f80781c874187dbeaf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15eb243d07ffa9c9c16af02de13b018f"><td class="memItemLeft" align="right" valign="top"><a id="a15eb243d07ffa9c9c16af02de13b018f" name="a15eb243d07ffa9c9c16af02de13b018f"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>tasks.cs1</b> = pyb.Pin(pyb.Pin.board.PB8, mode=pyb.Pin.OUT_PP, value=1)</td></tr>
<tr class="memdesc:a15eb243d07ffa9c9c16af02de13b018f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Chip select pin for driver1. <br /></td></tr>
<tr class="separator:a15eb243d07ffa9c9c16af02de13b018f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a699991b53c0693b9737c478cc64f48"><td class="memItemLeft" align="right" valign="top"><a id="a9a699991b53c0693b9737c478cc64f48" name="a9a699991b53c0693b9737c478cc64f48"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>tasks.cs2</b> = pyb.Pin(pyb.Pin.board.PB9, mode=pyb.Pin.OUT_PP, value=1)</td></tr>
<tr class="memdesc:a9a699991b53c0693b9737c478cc64f48"><td class="mdescLeft">&#160;</td><td class="mdescRight">Chip select pin for driver2. <br /></td></tr>
<tr class="separator:a9a699991b53c0693b9737c478cc64f48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3b3ce95acec12b88b89f835c6e80da6"><td class="memItemLeft" align="right" valign="top"><a id="aa3b3ce95acec12b88b89f835c6e80da6" name="aa3b3ce95acec12b88b89f835c6e80da6"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>tasks.cs3</b> = pyb.Pin(pyb.Pin.cpu.C7, mode=pyb.Pin.OUT_PP, value=1)</td></tr>
<tr class="memdesc:aa3b3ce95acec12b88b89f835c6e80da6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Chip select pin for driver3. <br /></td></tr>
<tr class="separator:aa3b3ce95acec12b88b89f835c6e80da6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7bc6db442b78266130ee1026b9d55888"><td class="memItemLeft" align="right" valign="top"><a id="a7bc6db442b78266130ee1026b9d55888" name="a7bc6db442b78266130ee1026b9d55888"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>tasks.en1</b> = pyb.Pin(pyb.Pin.cpu.C2, mode=pyb.Pin.OUT_PP, value=1)</td></tr>
<tr class="memdesc:a7bc6db442b78266130ee1026b9d55888"><td class="mdescLeft">&#160;</td><td class="mdescRight">TMC2208 enable pin for driver1. <br /></td></tr>
<tr class="separator:a7bc6db442b78266130ee1026b9d55888"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2dd9399d8079ab72a6132970b30547d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tasks_8py.html#ab2dd9399d8079ab72a6132970b30547d">tasks.x_max</a> = MOTOR1_X_MAX</td></tr>
<tr class="memdesc:ab2dd9399d8079ab72a6132970b30547d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Max position for driver1.  <a href="tasks_8py.html#ab2dd9399d8079ab72a6132970b30547d">More...</a><br /></td></tr>
<tr class="separator:ab2dd9399d8079ab72a6132970b30547d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aefcded1a00b926ae32d34df9893686cc"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tasks_8py.html#aefcded1a00b926ae32d34df9893686cc">tasks.v_min</a> = MOTOR1_V_MIN</td></tr>
<tr class="memdesc:aefcded1a00b926ae32d34df9893686cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">V_MIN register value for driver1.  <a href="tasks_8py.html#aefcded1a00b926ae32d34df9893686cc">More...</a><br /></td></tr>
<tr class="separator:aefcded1a00b926ae32d34df9893686cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04503db688d606166701fd01ed241b8f"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tasks_8py.html#a04503db688d606166701fd01ed241b8f">tasks.v_max</a> = get_velocity_setting(MOTOR1_SPEED)</td></tr>
<tr class="memdesc:a04503db688d606166701fd01ed241b8f"><td class="mdescLeft">&#160;</td><td class="mdescRight">V_MAX register value for driver1.  <a href="tasks_8py.html#a04503db688d606166701fd01ed241b8f">More...</a><br /></td></tr>
<tr class="separator:a04503db688d606166701fd01ed241b8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d8ad0ac87696f9e1139aef657e524f6"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tasks_8py.html#a1d8ad0ac87696f9e1139aef657e524f6">tasks.a_max</a> = get_acceleration_setting(MOTOR1_A_MAX)</td></tr>
<tr class="memdesc:a1d8ad0ac87696f9e1139aef657e524f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">A_MAX register value for driver1.  <a href="tasks_8py.html#a1d8ad0ac87696f9e1139aef657e524f6">More...</a><br /></td></tr>
<tr class="separator:a1d8ad0ac87696f9e1139aef657e524f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49b47d6613ad78ec54c256a3211160f8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tasks_8py.html#a49b47d6613ad78ec54c256a3211160f8">tasks.pmul</a></td></tr>
<tr class="memdesc:a49b47d6613ad78ec54c256a3211160f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">PMUL and PDIV register values for driver1.  <a href="tasks_8py.html#a49b47d6613ad78ec54c256a3211160f8">More...</a><br /></td></tr>
<tr class="separator:a49b47d6613ad78ec54c256a3211160f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab923d81f7358fa6be3748cc8b6048ae4"><td class="memItemLeft" align="right" valign="top"><a id="ab923d81f7358fa6be3748cc8b6048ae4" name="ab923d81f7358fa6be3748cc8b6048ae4"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>tasks.pdiv</b></td></tr>
<tr class="separator:ab923d81f7358fa6be3748cc8b6048ae4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c5aad57d9e0142a1a2a995dad44d981"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tasks_8py.html#a1c5aad57d9e0142a1a2a995dad44d981">tasks.driver1</a></td></tr>
<tr class="memdesc:a1c5aad57d9e0142a1a2a995dad44d981"><td class="mdescLeft">&#160;</td><td class="mdescRight">driver1 Stepper_Driver object  <a href="tasks_8py.html#a1c5aad57d9e0142a1a2a995dad44d981">More...</a><br /></td></tr>
<tr class="separator:a1c5aad57d9e0142a1a2a995dad44d981"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28e67b0af58936bfbe93258f43137f47"><td class="memItemLeft" align="right" valign="top"><a id="a28e67b0af58936bfbe93258f43137f47" name="a28e67b0af58936bfbe93258f43137f47"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>tasks.en2</b> = pyb.Pin(pyb.Pin.cpu.C3, mode=pyb.Pin.OUT_PP, value=1)</td></tr>
<tr class="memdesc:a28e67b0af58936bfbe93258f43137f47"><td class="mdescLeft">&#160;</td><td class="mdescRight">TMC2208 enable pin for driver2. <br /></td></tr>
<tr class="separator:a28e67b0af58936bfbe93258f43137f47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e818c7f5c15d5478f5a337d8e120764"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tasks_8py.html#a7e818c7f5c15d5478f5a337d8e120764">tasks.driver2</a></td></tr>
<tr class="memdesc:a7e818c7f5c15d5478f5a337d8e120764"><td class="mdescLeft">&#160;</td><td class="mdescRight">driver2 Stepper_Driver object  <a href="tasks_8py.html#a7e818c7f5c15d5478f5a337d8e120764">More...</a><br /></td></tr>
<tr class="separator:a7e818c7f5c15d5478f5a337d8e120764"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b8bd6a0b064ce8b864c9df9ea62ab43"><td class="memItemLeft" align="right" valign="top"><a id="a9b8bd6a0b064ce8b864c9df9ea62ab43" name="a9b8bd6a0b064ce8b864c9df9ea62ab43"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>tasks.en3</b> = pyb.Pin(pyb.Pin.cpu.C6, mode=pyb.Pin.OUT_PP, value=1)</td></tr>
<tr class="memdesc:a9b8bd6a0b064ce8b864c9df9ea62ab43"><td class="mdescLeft">&#160;</td><td class="mdescRight">TMC2208 enable pin for driver3. <br /></td></tr>
<tr class="separator:a9b8bd6a0b064ce8b864c9df9ea62ab43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9dab1d3fd20a8f636b13131c7205a774"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tasks_8py.html#a9dab1d3fd20a8f636b13131c7205a774">tasks.driver3</a></td></tr>
<tr class="memdesc:a9dab1d3fd20a8f636b13131c7205a774"><td class="mdescLeft">&#160;</td><td class="mdescRight">driver3 Stepper_Driver object  <a href="tasks_8py.html#a9dab1d3fd20a8f636b13131c7205a774">More...</a><br /></td></tr>
<tr class="separator:a9dab1d3fd20a8f636b13131c7205a774"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30585d3aab1cdf61d7b49503bf30b535"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tasks_8py.html#a30585d3aab1cdf61d7b49503bf30b535">tasks.share_cmd_type</a></td></tr>
<tr class="memdesc:a30585d3aab1cdf61d7b49503bf30b535"><td class="mdescLeft">&#160;</td><td class="mdescRight">Command type share.  <a href="tasks_8py.html#a30585d3aab1cdf61d7b49503bf30b535">More...</a><br /></td></tr>
<tr class="separator:a30585d3aab1cdf61d7b49503bf30b535"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0036c6e880de0184471d4110c20e943d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tasks_8py.html#a0036c6e880de0184471d4110c20e943d">tasks.share_theta0</a></td></tr>
<tr class="memdesc:a0036c6e880de0184471d4110c20e943d"><td class="mdescLeft">&#160;</td><td class="mdescRight">theta0 share  <a href="tasks_8py.html#a0036c6e880de0184471d4110c20e943d">More...</a><br /></td></tr>
<tr class="separator:a0036c6e880de0184471d4110c20e943d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5d6997149c5076b12811a05173992f8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tasks_8py.html#ae5d6997149c5076b12811a05173992f8">tasks.share_theta1</a></td></tr>
<tr class="memdesc:ae5d6997149c5076b12811a05173992f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">theta1 share  <a href="tasks_8py.html#ae5d6997149c5076b12811a05173992f8">More...</a><br /></td></tr>
<tr class="separator:ae5d6997149c5076b12811a05173992f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2505455d768b8c69b4ca0a07bfb11fcb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tasks_8py.html#a2505455d768b8c69b4ca0a07bfb11fcb">tasks.task_cmds</a></td></tr>
<tr class="memdesc:a2505455d768b8c69b4ca0a07bfb11fcb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Task for sending commands to the TMC4210s.  <a href="tasks_8py.html#a2505455d768b8c69b4ca0a07bfb11fcb">More...</a><br /></td></tr>
<tr class="separator:a2505455d768b8c69b4ca0a07bfb11fcb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e4dde170b3fd6b232e3e351d62e5891"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tasks_8py.html#a4e4dde170b3fd6b232e3e351d62e5891">tasks.task_comms</a></td></tr>
<tr class="memdesc:a4e4dde170b3fd6b232e3e351d62e5891"><td class="mdescLeft">&#160;</td><td class="mdescRight">Taskf for sending commands to the PC.  <a href="tasks_8py.html#a4e4dde170b3fd6b232e3e351d62e5891">More...</a><br /></td></tr>
<tr class="separator:a4e4dde170b3fd6b232e3e351d62e5891"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >This file contains the main function for controlling the plotter, along with task functions for sending position commands to the stepper drivers and to a PC via UART. </p>
<dl class="section author"><dt>Author</dt><dd>Ryan Ghosh </dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>This file is licensed under the CC BY-NC-SA 4.0 Please visit <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">https://creativecommons.org/licenses/by-nc-sa/4.0/</a> for terms and conditions of the license. </dd></dl>
<dl class="section date"><dt>Date</dt><dd>June 10, 2022 </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="af969518a730c01845310715b784edc6f" name="af969518a730c01845310715b784edc6f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af969518a730c01845310715b784edc6f">&#9670;&nbsp;</a></span>convert_motor1_target()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def tasks.convert_motor1_target </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>microsteps</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Converts a motor1 target value to send to the TMC4210. </p>
<p >Takes in a target value for motor1 in units of microsteps And converts it to a corresponding value to send to the TMC4210, based on the direction of the motor and its angle when the limit switch is triggered. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">microsteps</td><td>Target position in microsteps. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Target position for motor1 that can be sent to the TMC4210. </dd></dl>

</div>
</div>
<a id="a5fa12df20bca46ed52ea867592873407" name="a5fa12df20bca46ed52ea867592873407"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5fa12df20bca46ed52ea867592873407">&#9670;&nbsp;</a></span>convert_motor2_target()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def tasks.convert_motor2_target </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>microsteps</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Converts a motor2 target value to send to the TMC4210. </p>
<p >Takes in a target value for motor2 in units of microsteps And converts it to a corresponding value to send to the TMC4210, based on the direction of the motor and its angle when the limit switch is triggered. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">microsteps</td><td>Target position in microsteps. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Target position for motor2 that can be sent to the TMC4210. </dd></dl>

</div>
</div>
<a id="a09cc2dc2ac0499a7e7336bd936c14b53" name="a09cc2dc2ac0499a7e7336bd936c14b53"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a09cc2dc2ac0499a7e7336bd936c14b53">&#9670;&nbsp;</a></span>create_cmd_list()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def tasks.create_cmd_list </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a list of motor commands from an hpgl file. </p>
<p >Converts each command in an hpgl file to a tuple containing the type ("PU" or "PD" for "pen up" or "pen down"), an array of theta0 values to send to the driver1 TMC4210, and an array of theta1 values to send to the driver2 TMC4210. </p><dl class="section return"><dt>Returns</dt><dd>A list of command tuples. </dd></dl>

</div>
</div>
<a id="afade8f38c7c94f377a51ea2ce9a99205" name="afade8f38c7c94f377a51ea2ce9a99205"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afade8f38c7c94f377a51ea2ce9a99205">&#9670;&nbsp;</a></span>dg_dtheta()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def tasks.dg_dtheta </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>theta</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>dg/dtheta(theta) function for use in the Newton-Raphson algorithm. </p>
<p >A function of theta that is used to iteratively find the value of theta that satisfies x = f(theta), where x is the desired pen position and theta is the motor positions. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">theta</td><td>tuple of (theta0, theta1). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>dg(theta)/dtheta for the theta guess that is passed in. </dd></dl>

</div>
</div>
<a id="ac09780cfd49f4a2192afd8feb427139b" name="ac09780cfd49f4a2192afd8feb427139b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac09780cfd49f4a2192afd8feb427139b">&#9670;&nbsp;</a></span>g()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def tasks.g </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>theta</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>g(x, theta) function for use in the Newton-Raphson algorithm. </p>
<p >A function of x and theta that should be driven to 0 to iteratively find the value of theta that satisfies x = f(theta), where x is the desired pen position and theta is the motor positions. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>tuple of (x_target, y_target). </td></tr>
    <tr><td class="paramname">theta</td><td>tuple of (theta0, theta1). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>g(theta) for the theta guess that is passed in. </dd></dl>

</div>
</div>
<a id="a18f2be2f9925530bb6654f0cc2426484" name="a18f2be2f9925530bb6654f0cc2426484"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18f2be2f9925530bb6654f0cc2426484">&#9670;&nbsp;</a></span>get_acceleration_setting()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def tasks.get_acceleration_setting </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>rad_per_sec2</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Converts the acceleration value that is passed in. </p>
<p >Takes in an acceleration value in rad/s^2 and converts it to a corresponding value to be used in the A_MAX register of a TMC4210. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rad_per_sec2</td><td>Acceleration value in rad/s^2. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Corresponding acceleration value to be used in the TMC4210 registers. </dd></dl>

</div>
</div>
<a id="aba9b25173a071096b339ec3855ab041c" name="aba9b25173a071096b339ec3855ab041c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba9b25173a071096b339ec3855ab041c">&#9670;&nbsp;</a></span>get_pmul_and_pdiv_setting()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def tasks.get_pmul_and_pdiv_setting </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>a_max</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Finds values for PMUL and PDIV. </p>
<p >Finds suitable values for PMUL and PDIV to match the A_MAX value that is passed in, along with the existing RAMP_DIV and PULSE_DIV settings. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">a_max</td><td>A_MAX value to match with. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A tuple containing PMUL, PDIV values. </dd></dl>

</div>
</div>
<a id="a90bca6f1ca625dfe24640522fa733663" name="a90bca6f1ca625dfe24640522fa733663"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90bca6f1ca625dfe24640522fa733663">&#9670;&nbsp;</a></span>get_velocity_setting()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def tasks.get_velocity_setting </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>rad_per_sec</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Converts the velocity value that is passed in. </p>
<p >Takes in a velocity value in rad/s and converts it to a corresponding value to be used in the V_MIN or V_MAX register of a TMC4210. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rad_per_sec</td><td>Velocity value in rad/s. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Corresponding velocity value to be used in the TMC4210 registers. </dd></dl>

</div>
</div>
<a id="a274bf78874561823e1109a38a0481cc1" name="a274bf78874561823e1109a38a0481cc1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a274bf78874561823e1109a38a0481cc1">&#9670;&nbsp;</a></span>NewtonRaphson()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def tasks.NewtonRaphson </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>fcn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>jacobian</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>guess</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>thresh</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Iteratively solves the roots of y = g(theta). </p>
<p >Iteratively finds values for theta to drive the passed in fcn to within thresh of 0. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fcn</td><td>The function to find the roots of. </td></tr>
    <tr><td class="paramname">jacobian</td><td>Jacobian matrix for the system </td></tr>
    <tr><td class="paramname">guess</td><td>Initial guess for theta. </td></tr>
    <tr><td class="paramname">thresh</td><td>Allowable error when driving fcn to 0. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Resulting theta roots. </dd></dl>

</div>
</div>
<a id="abe0ffeb0c6c241b5ca5bad9b355032c3" name="abe0ffeb0c6c241b5ca5bad9b355032c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe0ffeb0c6c241b5ca5bad9b355032c3">&#9670;&nbsp;</a></span>onButtonPressFCN()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def tasks.onButtonPressFCN </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>IRQ_src</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the button flag when the button is pressed. </p>
<p >An interrupt function triggered when the blue button on the Nucleo is pressed. This function sets the button_flag share to 1 to indicate the button has been pressed. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">IRQ_src</td><td>Reference to the hardware device that caused the interrupt to occur. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aaa8ddc2c7cc0618004b06cec722eaf04" name="aaa8ddc2c7cc0618004b06cec722eaf04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa8ddc2c7cc0618004b06cec722eaf04">&#9670;&nbsp;</a></span>print_cmd_list()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def tasks.print_cmd_list </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>cmd_list</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prints out the passed in cmd_list. </p>
<p >Prints out each command type ("PU" or "PD") with the corrsponding coordinate list below it. </p>

</div>
</div>
<a id="ae51a8bc5ea480a9b2d0322148b58740b" name="ae51a8bc5ea480a9b2d0322148b58740b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae51a8bc5ea480a9b2d0322148b58740b">&#9670;&nbsp;</a></span>task_cmds_fun()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def tasks.task_cmds_fun </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Task function for sending commands to the TMC4210s. </p>
<p >Generator function that waits for a button press to begin, then reads through cmd_list and sets the targets for each stepper driver. The function waits for the current targets to be reached before sending the next ones. </p>

</div>
</div>
<a id="a0abe464fecdc1f2a83e44b2bcf009e55" name="a0abe464fecdc1f2a83e44b2bcf009e55"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0abe464fecdc1f2a83e44b2bcf009e55">&#9670;&nbsp;</a></span>task_comms_fun()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def tasks.task_comms_fun </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Task function for sending current commands to the PC. </p>
<p >Generator function that waits for a button press to begin, then sends the current commands to the PC for live plotting in sync with the physical plotter. </p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a1d8ad0ac87696f9e1139aef657e524f6" name="a1d8ad0ac87696f9e1139aef657e524f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d8ad0ac87696f9e1139aef657e524f6">&#9670;&nbsp;</a></span>a_max</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def tasks.a_max = get_acceleration_setting(MOTOR1_A_MAX)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A_MAX register value for driver1. </p>
<p >A_MAX register value for driver3.</p>
<p >A_MAX register value for driver2. </p>

</div>
</div>
<a id="af008734c9b9e1c494cbcdc6ae12996f4" name="af008734c9b9e1c494cbcdc6ae12996f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af008734c9b9e1c494cbcdc6ae12996f4">&#9670;&nbsp;</a></span>button_int</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tasks.button_int</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span>=  pyb.ExtInt(pyb.Pin.cpu.C13, pyb.ExtInt.IRQ_FALLING,</div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span>                        pyb.Pin.PULL_NONE, callback=onButtonPressFCN)</div>
</div><!-- fragment -->
<p>Button interrupt. </p>

</div>
</div>
<a id="afb75e7e52287d7047855980c84d9f9ef" name="afb75e7e52287d7047855980c84d9f9ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb75e7e52287d7047855980c84d9f9ef">&#9670;&nbsp;</a></span>cmd_list</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def tasks.cmd_list = None</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>List of stepper commands, in units of microsteps. </p>
<p >List of plotter commands. </p>

</div>
</div>
<a id="a1c5aad57d9e0142a1a2a995dad44d981" name="a1c5aad57d9e0142a1a2a995dad44d981"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c5aad57d9e0142a1a2a995dad44d981">&#9670;&nbsp;</a></span>driver1</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tasks.driver1</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span>=  Stepper_Driver(spi, en1, cs1,</div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span>                                x_max, v_min, v_max, PULSE_DIV, RAMP_DIV,</div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span>                                a_max, pmul, pdiv)</div>
</div><!-- fragment -->
<p>driver1 Stepper_Driver object </p>

</div>
</div>
<a id="a7e818c7f5c15d5478f5a337d8e120764" name="a7e818c7f5c15d5478f5a337d8e120764"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e818c7f5c15d5478f5a337d8e120764">&#9670;&nbsp;</a></span>driver2</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tasks.driver2</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span>=  Stepper_Driver(spi, en2, cs2,</div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span>                                x_max, v_min, v_max, PULSE_DIV, RAMP_DIV,</div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span>                                a_max, pmul, pdiv)</div>
</div><!-- fragment -->
<p>driver2 Stepper_Driver object </p>

</div>
</div>
<a id="a9dab1d3fd20a8f636b13131c7205a774" name="a9dab1d3fd20a8f636b13131c7205a774"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9dab1d3fd20a8f636b13131c7205a774">&#9670;&nbsp;</a></span>driver3</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tasks.driver3</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span>=  Stepper_Driver(spi, en3, cs3,</div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span>                                x_max, v_min, v_max, PULSE_DIV, RAMP_DIV,</div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span>                                a_max, pmul, pdiv)</div>
</div><!-- fragment -->
<p>driver3 Stepper_Driver object </p>

</div>
</div>
<a id="a7778945946b12bb48b87427f9ceef841" name="a7778945946b12bb48b87427f9ceef841"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7778945946b12bb48b87427f9ceef841">&#9670;&nbsp;</a></span>drivers</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">list tasks.drivers = [3]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stepper_Driver objects for controlling the 3 steppers. </p>
<p >List of stepper drivers. </p>

</div>
</div>
<a id="a49b47d6613ad78ec54c256a3211160f8" name="a49b47d6613ad78ec54c256a3211160f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a49b47d6613ad78ec54c256a3211160f8">&#9670;&nbsp;</a></span>pmul</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tasks.pmul</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>PMUL and PDIV register values for driver1. </p>
<p >PMUL and PDIV register values for driver3.</p>
<p >PMUL and PDIV register values for driver2. </p>

</div>
</div>
<a id="a57de87382ce60daebf2197149fe20394" name="a57de87382ce60daebf2197149fe20394"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57de87382ce60daebf2197149fe20394">&#9670;&nbsp;</a></span>share_button_flag</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tasks.share_button_flag = None</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Button flag. </p>
<p >Button flag share. </p>

</div>
</div>
<a id="a30585d3aab1cdf61d7b49503bf30b535" name="a30585d3aab1cdf61d7b49503bf30b535"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a30585d3aab1cdf61d7b49503bf30b535">&#9670;&nbsp;</a></span>share_cmd_type</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tasks.share_cmd_type</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span>=  task_share.Share(<span class="stringliteral">&#39;H&#39;</span>, thread_protect = <span class="keyword">False</span>,</div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span>                                           name = <span class="stringliteral">&quot;Share Command Type&quot;</span>)</div>
</div><!-- fragment -->
<p>Command type share. </p>

</div>
</div>
<a id="a0036c6e880de0184471d4110c20e943d" name="a0036c6e880de0184471d4110c20e943d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0036c6e880de0184471d4110c20e943d">&#9670;&nbsp;</a></span>share_theta0</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tasks.share_theta0</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span>=  task_share.Share(<span class="stringliteral">&#39;L&#39;</span>, thread_protect = <span class="keyword">False</span>,</div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span>                                           name = <span class="stringliteral">&quot;Share Theta0&quot;</span>)</div>
</div><!-- fragment -->
<p>theta0 share </p>

</div>
</div>
<a id="ae5d6997149c5076b12811a05173992f8" name="ae5d6997149c5076b12811a05173992f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5d6997149c5076b12811a05173992f8">&#9670;&nbsp;</a></span>share_theta1</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tasks.share_theta1</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span>=  task_share.Share(<span class="stringliteral">&#39;L&#39;</span>, thread_protect = <span class="keyword">False</span>,</div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span>                                           name = <span class="stringliteral">&quot;Share Theta1&quot;</span>)</div>
</div><!-- fragment -->
<p>theta1 share </p>

</div>
</div>
<a id="a2505455d768b8c69b4ca0a07bfb11fcb" name="a2505455d768b8c69b4ca0a07bfb11fcb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2505455d768b8c69b4ca0a07bfb11fcb">&#9670;&nbsp;</a></span>task_cmds</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tasks.task_cmds</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span>=  cotask.Task(task_cmds_fun, name=<span class="stringliteral">&#39;Task_Commands&#39;</span>,</div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span>                              priority=1, period=1, profile=<span class="keyword">True</span>, trace=<span class="keyword">False</span>)</div>
</div><!-- fragment -->
<p>Task for sending commands to the TMC4210s. </p>

</div>
</div>
<a id="a4e4dde170b3fd6b232e3e351d62e5891" name="a4e4dde170b3fd6b232e3e351d62e5891"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e4dde170b3fd6b232e3e351d62e5891">&#9670;&nbsp;</a></span>task_comms</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tasks.task_comms</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span>=  cotask.Task(task_comms_fun, name=<span class="stringliteral">&#39;Task_Comms&#39;</span>,</div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span>                              priority=2, period=100, profile=<span class="keyword">True</span>, trace=<span class="keyword">False</span>)</div>
</div><!-- fragment -->
<p>Taskf for sending commands to the PC. </p>

</div>
</div>
<a id="a04503db688d606166701fd01ed241b8f" name="a04503db688d606166701fd01ed241b8f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04503db688d606166701fd01ed241b8f">&#9670;&nbsp;</a></span>v_max</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def tasks.v_max = get_velocity_setting(MOTOR1_SPEED)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>V_MAX register value for driver1. </p>
<p >V_MAX register value for driver3.</p>
<p >V_MAX register value for driver2. </p>

</div>
</div>
<a id="aefcded1a00b926ae32d34df9893686cc" name="aefcded1a00b926ae32d34df9893686cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aefcded1a00b926ae32d34df9893686cc">&#9670;&nbsp;</a></span>v_min</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tasks.v_min = MOTOR1_V_MIN</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>V_MIN register value for driver1. </p>
<p >V_MIN register value for driver3.</p>
<p >V_MIN register value for driver2. </p>

</div>
</div>
<a id="ab2dd9399d8079ab72a6132970b30547d" name="ab2dd9399d8079ab72a6132970b30547d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab2dd9399d8079ab72a6132970b30547d">&#9670;&nbsp;</a></span>x_max</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tasks.x_max = MOTOR1_X_MAX</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Max position for driver1. </p>
<p >Max position for driver3.</p>
<p >Max position for driver2. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="tasks_8py.html">tasks.py</a></li>
    <li class="footer">Generated on Fri Jun 10 2022 15:54:31 for ME 405 Pen Plotter by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
</body>
</html>
